<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendrier de Garde Altern√©e</title>
    <style>
        /* üé® Style CSS */
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            padding: 20px;
            background-color: #f4f7f6;
        }

        .calendar-container {
            width: 100%;
            max-width: 800px;
            background-color: #fff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            padding: 20px;
        }

        /* En-t√™te de configuration */
        .config-header {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            background-color: #e9ecef;
        }

        .config-header label {
            font-weight: bold;
            display: block;
            margin-top: 10px;
        }

        .config-header input, .config-header select {
            padding: 8px;
            margin-right: 20px;
            border-radius: 4px;
            border: 1px solid #ccc;
        }

        /* En-t√™te du calendrier */
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 10px 0;
            border-bottom: 2px solid #3498db;
        }

        .calendar-header button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 15px;
            cursor: pointer;
            border-radius: 4px;
            font-size: 16px;
        }

        .calendar-header h2 {
            margin: 0;
            color: #333;
        }

        /* Tableau du calendrier */
        #calendar {
            width: 100%;
            border-collapse: collapse;
        }

        #calendar th {
            background-color: #3498db;
            color: white;
            padding: 10px;
            font-weight: bold;
        }

        #calendar td {
            border: 1px solid #eee;
            padding: 10px 5px;
            text-align: center;
            height: 60px; /* Espace pour la couleur */
            cursor: default; /* Pas de clic par d√©faut */
            transition: background-color 0.2s;
        }

        /* Couleurs d'alternance */
        .parent-a {
            background-color: #add8e6; /* Bleu clair */
            color: #333;
        }

        .parent-b {
            background-color: #90ee90; /* Vert clair */
            color: #333;
        }

        /* Jours hors mois */
        .out-of-month {
            background-color: #f8f8f8;
            color: #ccc;
        }

        /* L√©gende */
        .legend {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #ddd;
            display: flex;
            gap: 20px;
        }

        .legend-item {
            display: flex;
            align-items: center;
        }

        .color-box {
            width: 20px;
            height: 20px;
            margin-right: 8px;
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>

    <div class="calendar-container">
        <h1 style="text-align: center; color: #3498db;">üóìÔ∏è Calendrier de Garde Altern√©e</h1>
        
        <div class="config-header">
    <h3>Configuration de la Garde</h3>

    <label for="nameA">Nom du Parent A :</label>
    <input type="text" id="nameA" value="Maman" onchange="updateNames()">

    <label for="nameB">Nom du Parent B :</label>
    <input type="text" id="nameB" value="Papa" onchange="updateNames()">
    
    <label for="refDate">Date de d√©but du cycle (Lundi) :</label>
    <input type="date" id="refDate" value="2025-01-06" onchange="initCalendar()">
    
    <label for="startParent">Parent qui commence :</label>
    <select id="startParent" onchange="initCalendar()">
        <option value="parent-a">Parent A</option>
        <option value="parent-b">Parent B</option>
    </select>
</div>

        <div class="calendar-header">
            <button id="prev-month" onclick="changeMonth(-1)"> &lt; Mois Pr√©c√©dent </button>
            <h2 id="month-year"></h2>
            <button id="next-month" onclick="changeMonth(1)"> Mois Suivant &gt; </button>
        </div>

        <table id="calendar">
            <thead>
                <tr>
                    <th>Lun</th>
                    <th>Mar</th>
                    <th>Mer</th>
                    <th>Jeu</th>
                    <th>Ven</th>
                    <th>Sam</th>
                    <th>Dim</th>
                </tr>
            </thead>
            <tbody id="calendar-body">
                </tbody>
        </table>

        <div class="legend">
            <div class="legend-item">
                <div class="color-box parent-a"></div>
                <span id="legend-name-a">Parent A (semaine 1)</span>
            </div>
            <div class="legend-item">
                <div class="color-box parent-b"></div>
                <span id="legend-name-b">Parent B (semaine 2)</span>
            </div>
        </div>
    </div>

    <script>
        // üß† Logique JavaScript
        let currentMonth = new Date().getMonth();
        let currentYear = new Date().getFullYear();

        const MS_PER_DAY = 1000 * 60 * 60 * 24;
/**
 * Met √† jour les noms des parents dans la l√©gende et le s√©lecteur de d√©part.
 */
function updateNames() {
    const nameA = document.getElementById('nameA').value || 'Parent A';
    const nameB = document.getElementById('nameB').value || 'Parent B';
    
    // Mettre √† jour la l√©gende
    document.getElementById('legend-name-a').textContent = `${nameA} (semaine 1)`;
    document.getElementById('legend-name-b').textContent = `${nameB} (semaine 2)`;

    // Mettre √† jour le s√©lecteur du parent qui commence
    const startParentSelect = document.getElementById('startParent');
    startParentSelect.options[0].textContent = nameA;
    startParentSelect.options[1].textContent = nameB;

    // Rafra√Æchir le calendrier pour mettre √† jour les bulles d'aide
    renderCalendar();
}
        /**
 * D√©termine √† quel parent appartient la date donn√©e et son nom.
 * @returns {{class: string, name: string}} La classe CSS et le nom du parent.
 */
function getParent(date, refDate, startParentClass) {
    const nameA = document.getElementById('nameA').value || 'Parent A';
    const nameB = document.getElementById('nameB').value || 'Parent B';

    // ... (Le calcul du jour dans le cycle reste le m√™me) ...
    const diffDays = Math.floor((date.getTime() - refDate.getTime()) / MS_PER_DAY);
    let dayInCycle = diffDays % 14; 
    if (dayInCycle < 0) {
        dayInCycle += 14;
    }

    let baseClass = (dayInCycle >= 0 && dayInCycle <= 6) ? 
        { class: 'parent-a', name: nameA } : 
        { class: 'parent-b', name: nameB };

    // Inversion si le parent B commence
    if (startParentClass === 'parent-b') {
        if (baseClass.class === 'parent-a') {
            return { class: 'parent-b', name: nameB };
        } else {
            return { class: 'parent-a', name: nameA };
        }
    }

    return baseClass;
}

        /**
         * G√©n√®re et affiche le calendrier pour le mois et l'ann√©e courants.
         */
        function renderCalendar() {
            const body = document.getElementById('calendar-body');
            const monthYearText = document.getElementById('month-year');
            const refDateInput = document.getElementById('refDate');
            const startParentSelect = document.getElementById('startParent');

            // 1. R√©cup√©ration de la configuration
            const refDate = new Date(refDateInput.value);
            const startParentClass = startParentSelect.value;
            
            // V√©rification simple (la date de r√©f√©rence doit √™tre un Lundi)
            // Note: getDay() retourne 1 pour Lundi, 0 pour Dimanche, etc.
            if (refDate.getDay() !== 1) {
                // Vous pourriez ajouter un message d'erreur ici pour l'utilisateur
                console.warn("La date de r√©f√©rence devrait id√©alement √™tre un LUNDI pour un cycle de 14 jours.");
            }

            // 2. Initialisation des dates
            const firstDayOfMonth = new Date(currentYear, currentMonth, 1);
            const lastDayOfMonth = new Date(currentYear, currentMonth + 1, 0);
            
            // getDay() de JS: 0=Dim, 1=Lun, ..., 6=Sam. On veut 1=Lun.
            // On calcule le d√©calage pour que le Lundi soit le 1er jour de la ligne.
            let startOffset = firstDayOfMonth.getDay(); 
            if (startOffset === 0) startOffset = 7; // Dimanche devient 7
            startOffset = startOffset - 1; // Le d√©calage est (JourJS - 1)

            // Mise √† jour de l'affichage de l'en-t√™te
            const monthName = firstDayOfMonth.toLocaleDateString('fr-FR', { month: 'long' });
            monthYearText.textContent = `${monthName.charAt(0).toUpperCase() + monthName.slice(1)} ${currentYear}`;
            
            body.innerHTML = ''; // Nettoyer l'ancien contenu

            // 3. Boucle de g√©n√©ration des jours
            let date = 1;
            for (let i = 0; i < 6; i++) { // Max 6 semaines
                const row = document.createElement('tr');
                let hasRealDay = false; // Pour √©viter les lignes enti√®rement vides

                for (let j = 0; j < 7; j++) { // 7 jours de la semaine
                    const cell = document.createElement('td');
                    
                    if (i === 0 && j < startOffset) {
                        // Jours du mois pr√©c√©dent (cellules vides au d√©but)
                        cell.textContent = '';
                        cell.classList.add('out-of-month');
                    } else if (date > lastDayOfMonth.getDate()) {
                        // Jours du mois suivant (cellules vides √† la fin)
                        cell.textContent = '';
                        cell.classList.add('out-of-month');
                    } else {
                        // Jours du mois actuel
                        const currentDate = new Date(currentYear, currentMonth, date);
                        
                        cell.textContent = date;
                        
                        // --- APPLICATION DE LA LOGIQUE DE GARDE ALTERN√âE ---
                        // Nouvelle logique
const parentInfo = getParent(currentDate, refDate, startParentClass);

cell.classList.add(parentInfo.class);
// Ajout du nom comme bulle d'aide (tooltip)
cell.setAttribute('title', parentInfo.name);
                        // --------------------------------------------------
                        
                        date++;
                        hasRealDay = true;
                    }
                    row.appendChild(cell);
                }
                
                // Ajouter la ligne uniquement si elle contient au moins un jour du mois
                if (hasRealDay) {
                    body.appendChild(row);
                }
                
                if (date > lastDayOfMonth.getDate()) {
                    break; // Arr√™ter si tous les jours du mois ont √©t√© plac√©s
                }
            }
        }

        /**
         * Change le mois affich√© et rafra√Æchit le calendrier.
         * @param {number} delta - 1 pour le mois suivant, -1 pour le mois pr√©c√©dent.
         */
        function changeMonth(delta) {
            currentMonth += delta;
            
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            } else if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            
            renderCalendar();
        }

        /**
         * Initialise le calendrier au chargement de la page.
         */
        function initCalendar() {
    // 1. Initialiser l'affichage des noms
    updateNames(); 
    
    // 2. Initialiser le calendrier
    const today = new Date();
    currentMonth = today.getMonth();
    currentYear = today.getFullYear();
    renderCalendar();
}

        // D√©marrer le calendrier
        initCalendar();
    </script>

</body>
</html>
